{% extends "gcc/base.html" %}
{% load static %}
{% load i18n %}

{% block title %}{% trans 'Past Editions' %}{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'gcc/css/editions.css' %}" />
{% endblock %}

{% block content %}

<div id="edition-history" class="container">
    {% for edition in editions %}
    <div class="row">
        <div class="col-sm-2 edition-header">
            <h1>{{ edition.year }}</h1>
            <a href="{{ edition.poster_url }}">
                <img src="{{ edition.poster_url }}" alt="affiche GCC {{ edition.year }}"/>
            </a>
        </div>
        <div class="col-sm-10 edition-description">
            <p>
            {% blocktrans with description=edition.long_description|safe %}
              {{ description }}
            {% endblocktrans %}
            </p>
                  <!-- Carousel -->
                  <div id="carousel-{{ edition.year }}" class="carousel slide" data-ride="carousel">
                    <ol class="carousel-indicators">
                    {% for image in edition.get_all_images %}
                        {% if forloop.first %}
                        <li data-target="#carousel-{{ edition.year }}" data-slide-to="{{ forloop.counter0 }}" class="active"></li>
                        {% else %}
                        <li data-target="#carousel-{{ edition.year }}" data-slide-to="{{ forloop.counter0 }}"></li>
                        {% endif %}
                    {% endfor %}
                    </ol>
                    <div class="carousel-inner">
                        {% for image in edition.get_all_images %}
                            {% if forloop.first %}
                            <div class="item active">
                            {% else %}
                            <div class="item">
                            {% endif %}
                                <img class="d-block w-100" style="width:100%" src="{{ image }}">
                            </div>
                        {% endfor %}
                    </div>
                    <a href="#carousel-{{ edition.year }}" class="left carousel-control" data-slide="prev">
                        <span class="icon-prev"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a href="#carousel-{{ edition.year }}" class="right carousel-control" data-slide="next">
                      <span class="icon-next" aria-hidden="true"></span>
                      <span class="sr-only">Next</span>
                    </a>
                  </div>
                  <!-- Carousel -->
                  {% for image in edition.get_all_images %}
                    <!-- Modal -->
                    <div class="modal fade" id='photo-modal{{ edition.year }}-{{ forloop.counter0 }}' tabindex="-1" role="dialog" aria-labelledby="photo-modal-label" aria-hidden="true" data-show="false" data-focus="false">
                        <div class="modal-dialog modal-lg" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <img src="{{ image }}" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Modal -->
                  {% endfor %}
                <!--</div>
            </div>-->
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}
